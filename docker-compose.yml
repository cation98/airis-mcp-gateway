name: airis-mcp-gateway

services:
  gateway:
    container_name: airis-mcp-gateway
    image: docker/mcp-gateway:latest
    command:
      - --transport=sse
      - --port=9400
      - --watch
      # Custom catalog with Airis servers
      - --additional-catalog=/workspace/airis-mcp-gateway/catalogs/airis-catalog.yaml
      # Default enabled servers
      - --servers=time
      - --servers=memory
      - --servers=airis-agent
      - --servers=mindbase
    ports:
      - "9400:9400"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ${HOST_WORKSPACE_DIR:-${HOME}/github}:/workspace:rw
    healthcheck:
      test: ["CMD-SHELL", "wget -qS --spider http://localhost:9400/health 2>&1 | grep -q '200'"]
      interval: 10s
      timeout: 3s
      retries: 5
    restart: unless-stopped
