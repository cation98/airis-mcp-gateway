{
  "version": "1.3.0",
  "name": "airis-mcp-gateway",
  "type": "monorepo",
  "package_manager": "pnpm",
  "last_updated": "2025-10-21",
  "statistics": {
    "total_files": 613,
    "core_files": 72,
    "languages": ["TypeScript", "Python", "JavaScript"]
  },
  "architecture": {
    "backend": {
      "framework": "FastAPI",
      "language": "Python",
      "version": ">=3.12",
      "database": "PostgreSQL",
      "orm": "SQLAlchemy 2.0+",
      "migrations": "Alembic"
    },
    "frontend": {
      "framework": "React 19",
      "language": "TypeScript",
      "build_tool": "Vite",
      "styling": "TailwindCSS",
      "router": "React Router 7.6+"
    },
    "infrastructure": {
      "containerization": "Docker Compose",
      "runtime": "OrbStack/Docker Desktop",
      "reverse_proxy": "Traefik (optional)"
    }
  },
  "directory_structure": {
    "apps": {
      "api": {
        "path": "apps/api/",
        "type": "backend",
        "language": "Python",
        "entry_point": "app/main.py",
        "key_modules": [
          "app/api/endpoints/",
          "app/core/",
          "app/crud/",
          "app/models/",
          "app/schemas/"
        ]
      },
      "settings": {
        "path": "apps/settings/",
        "type": "frontend",
        "language": "TypeScript",
        "framework": "React + Vite",
        "entry_point": "src/main.tsx",
        "key_modules": [
          "src/pages/mcp-dashboard/",
          "src/router/",
          "src/validation/",
          "src/i18n/"
        ]
      }
    },
    "packages": {
      "cli": {
        "path": "packages/cli/",
        "type": "cli",
        "language": "TypeScript",
        "entry_point": "bin/airis-gateway.js"
      }
    },
    "servers": {
      "mindbase": {
        "path": "servers/mindbase/",
        "type": "mcp_server",
        "language": "TypeScript",
        "purpose": "Memory management and knowledge graph"
      },
      "self-management": {
        "path": "servers/self-management/",
        "type": "mcp_server",
        "language": "TypeScript",
        "purpose": "Self-improvement and learning"
      }
    },
    "gateway": {
      "path": "gateway/",
      "type": "orchestration",
      "purpose": "Unified MCP server proxy"
    },
    "tests": {
      "path": "tests/",
      "framework": "pytest",
      "key_files": [
        "apps/api/tests/integration/test_mcp_server_persistence.py",
        "apps/api/tests/integration/test_server_toggle_workflow.py"
      ]
    },
    "docs": {
      "path": "docs/",
      "categories": ["research", "memory"],
      "key_files": [
        "README.md",
        "ARCHITECTURE.md",
        "SECRETS.md",
        "ROADMAP.md",
        "VISION.md"
      ]
    }
  },
  "database_schema": {
    "tables": [
      {
        "name": "mcp_servers",
        "purpose": "MCP server metadata and enabled state",
        "key_columns": ["id", "name", "enabled", "config"]
      },
      {
        "name": "secrets",
        "purpose": "Encrypted API keys and credentials",
        "key_columns": ["id", "key", "encrypted_value"]
      },
      {
        "name": "mcp_server_states",
        "purpose": "Runtime state tracking",
        "key_columns": ["id", "server_id", "state", "last_updated"]
      }
    ]
  },
  "api_endpoints": {
    "servers": [
      "GET /api/servers - List all MCP servers",
      "GET /api/servers/{id} - Get server details",
      "POST /api/servers/{id}/toggle - Toggle server enabled state",
      "POST /api/servers/validate - Validate server configuration"
    ],
    "secrets": [
      "GET /api/secrets - List all secrets",
      "POST /api/secrets - Create encrypted secret",
      "PUT /api/secrets/{id} - Update secret",
      "DELETE /api/secrets/{id} - Delete secret"
    ],
    "config": [
      "GET /api/mcp-config - Get MCP configuration",
      "POST /api/mcp-config/export - Export config for IDE"
    ],
    "proxy": [
      "GET /sse - SSE endpoint for MCP Gateway",
      "POST /mcp/{server_name} - Proxy to specific MCP server"
    ]
  },
  "key_features": [
    "Zero-token startup (lazy loading)",
    "Encrypted secret storage (Fernet)",
    "Multi-editor support (Claude, Cursor, Zed, Windsurf)",
    "Unified gateway (25+ MCP servers)",
    "Persistent state (PostgreSQL)",
    "Auto-import existing configs",
    "Web UI dashboard",
    "Profile system (minimal/recommended)"
  ],
  "mcp_servers_included": [
    "filesystem",
    "context7",
    "serena",
    "mindbase",
    "sequential-thinking",
    "tavily",
    "brave-search",
    "github",
    "stripe",
    "supabase",
    "postgresql",
    "mongodb",
    "sqlite",
    "puppeteer",
    "playwright",
    "sentry",
    "twilio",
    "figma",
    "notion",
    "slack"
  ],
  "ide_integration": [
    "Claude Desktop (.mcpb extension)",
    "Cursor (~/.cursor/mcp.json)",
    "Zed (~/.config/zed/mcp.json)",
    "Windsurf (~/.windsurf/mcp.json)"
  ],
  "distribution": {
    "homebrew": {
      "tap": "agiletec-inc/tap",
      "formula": "Formula/airis-mcp-gateway.rb",
      "type": "CLI tool"
    },
    "manual": {
      "method": "git clone + docker compose"
    }
  },
  "development": {
    "quick_start": [
      "pnpm install",
      "docker compose up -d",
      "Access: http://localhost:5173 (UI), http://localhost:8001/docs (API)"
    ],
    "common_commands": {
      "dev": "Start frontend dev server",
      "build": "Build all packages",
      "test": "Run tests",
      "typecheck": "Type checking"
    }
  },
  "access_urls": {
    "gateway": "http://localhost:9090",
    "settings_ui": "http://localhost:5173",
    "api_docs": "http://localhost:8001/docs",
    "api_base": "http://localhost:8001"
  },
  "token_efficiency": {
    "before": "58,000 tokens (full file scan)",
    "after": "3,000 tokens (index-based)",
    "savings": "93% reduction (54,000 tokens)"
  }
}
