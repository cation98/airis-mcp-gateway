{
  "project": {
    "name": "airis-mcp-gateway",
    "version": "1.2.0",
    "description": "Unified entrypoint for 25+ MCP servers. One command, zero manual provisioning.",
    "generated": "2025-11-12",
    "repository": "https://github.com/agiletec-inc/airis-mcp-gateway.git"
  },
  "structure": {
    "apps": {
      "api": {
        "type": "fastapi",
        "language": "python",
        "version": "3.12+",
        "entry_point": "src/app/main.py",
        "description": "FastAPI backend with schema partitioning proxy"
      },
      "settings": {
        "type": "react",
        "language": "typescript",
        "version": "19.2.0",
        "entry_point": "src/main.tsx",
        "description": "Settings UI for MCP server management"
      }
    },
    "servers": {
      "mindbase": {
        "type": "mcp-server",
        "language": "typescript",
        "entry_point": "src/index.ts",
        "description": "AI conversation memory with vector search"
      },
      "gateway-control": {
        "type": "mcp-server",
        "language": "typescript",
        "entry_point": "src/index.ts",
        "description": "Dynamic MCP server enable/disable orchestration"
      }
    },
    "packages": {
      "cli": {
        "type": "cli-tools",
        "language": "typescript",
        "description": "CLI utilities for gateway management"
      },
      "augmentor-runtime": {
        "type": "library",
        "language": "typescript",
        "description": "Augmentor runtime support"
      }
    }
  },
  "entry_points": {
    "cli": [
      {
        "command": "just init",
        "description": "Full installation: build, start, register editors",
        "location": "Makefile:609"
      },
      {
        "command": "make up",
        "description": "Start services with host port bindings",
        "location": "Makefile:168"
      },
      {
        "command": "make restart",
        "description": "Full stop/start cycle",
        "location": "Makefile:199"
      }
    ],
    "api": [
      {
        "endpoint": "http://api.gateway.localhost:9400/api/v1/mcp",
        "type": "http",
        "description": "Codex CLI HTTP MCP endpoint"
      },
      {
        "endpoint": "http://api.gateway.localhost:9400/api/v1/mcp/sse",
        "type": "sse",
        "description": "SSE Gateway for Claude/Cursor/Zed"
      },
      {
        "endpoint": "http://api.gateway.localhost:9400/docs",
        "type": "http",
        "description": "FastAPI interactive documentation"
      },
      {
        "endpoint": "http://ui.gateway.localhost:5273",
        "type": "http",
        "description": "Settings UI dashboard"
      }
    ],
    "python": [
      {
        "file": "apps/api/src/app/main.py",
        "description": "FastAPI application entry point"
      },
      {
        "file": "scripts/import_existing_configs.py",
        "description": "Import IDE MCP configs into Gateway"
      },
      {
        "file": "scripts/install_all_editors.py",
        "description": "Multi-editor installer (Claude, Cursor, Zed, Codex)"
      },
      {
        "file": "tools/measurement/measure_token_reduction.py",
        "description": "Token reduction measurement tool"
      }
    ],
    "typescript": [
      {
        "file": "apps/settings/src/main.tsx",
        "description": "React Settings UI entry point"
      },
      {
        "file": "apps/mindbase/src/index.ts",
        "description": "MindBase MCP server entry point"
      },
      {
        "file": "apps/gateway-control/src/index.ts",
        "description": "Gateway Control MCP server entry point"
      }
    ]
  },
  "core_modules": {
    "api_core": [
      {
        "file": "apps/api/src/app/core/schema_partitioning.py",
        "exports": ["partition_schema", "store_full_schema", "expand_schema"],
        "purpose": "Token reduction via schema partitioning (90% reduction)"
      },
      {
        "file": "apps/api/src/app/core/encryption.py",
        "exports": ["encrypt", "decrypt"],
        "purpose": "Fernet encryption for API keys"
      },
      {
        "file": "apps/api/src/app/core/database.py",
        "exports": ["get_async_session", "init_db"],
        "purpose": "Async SQLAlchemy session management"
      },
      {
        "file": "apps/api/src/app/core/protocol_logger.py",
        "exports": ["log_protocol_message"],
        "purpose": "MCP protocol message logging"
      }
    ],
    "api_endpoints": [
      {
        "file": "apps/api/src/app/api/endpoints/mcp_proxy.py",
        "routes": ["/api/v1/mcp/sse", "/api/v1/mcp"],
        "purpose": "SSE/JSON-RPC proxy with schema partitioning"
      },
      {
        "file": "apps/api/src/app/api/endpoints/mcp_servers.py",
        "routes": ["/api/v1/mcp/servers"],
        "purpose": "Server CRUD operations"
      },
      {
        "file": "apps/api/src/app/api/endpoints/gateway.py",
        "routes": ["/api/v1/gateway/restart"],
        "purpose": "Gateway restart API"
      },
      {
        "file": "apps/api/src/app/api/endpoints/dashboard.py",
        "routes": ["/api/v1/dashboard/summary"],
        "purpose": "Dashboard metrics and summary"
      }
    ],
    "database_models": [
      {
        "file": "apps/api/src/app/models/mcp_server.py",
        "model": "MCPServer",
        "purpose": "Server metadata"
      },
      {
        "file": "apps/api/src/app/models/mcp_server_state.py",
        "model": "MCPServerState",
        "purpose": "Server ON/OFF states"
      },
      {
        "file": "apps/api/src/app/models/secret.py",
        "model": "Secret",
        "purpose": "Encrypted API keys"
      }
    ],
    "installers": [
      {
        "file": "scripts/installers/claude.py",
        "class": "ClaudeInstaller",
        "purpose": "Claude Desktop/Code installer"
      },
      {
        "file": "scripts/installers/cursor.py",
        "class": "CursorInstaller",
        "purpose": "Cursor IDE installer"
      },
      {
        "file": "scripts/installers/zed.py",
        "class": "ZedInstaller",
        "purpose": "Zed editor installer"
      },
      {
        "file": "scripts/installers/codex.py",
        "class": "CodexInstaller",
        "purpose": "Codex CLI installer (HTTP + STDIO fallback)"
      }
    ],
    "react_ui": [
      {
        "file": "apps/settings/src/pages/mcp-dashboard/page.tsx",
        "component": "MCPDashboard",
        "purpose": "Main dashboard page"
      },
      {
        "file": "apps/settings/src/pages/mcp-dashboard/components/MCPServerCard.tsx",
        "component": "MCPServerCard",
        "purpose": "Server card component"
      },
      {
        "file": "apps/settings/src/validation/server-config.ts",
        "exports": ["serverConfigSchema"],
        "purpose": "Zod validation schemas"
      }
    ]
  },
  "configuration": {
    "core": [
      {
        "file": ".env",
        "format": "env",
        "purpose": "Environment variables (ports, DB credentials, encryption key)"
      },
      {
        "file": "mcp-config.json",
        "format": "json",
        "purpose": "Gateway server definitions (25+ MCP servers)"
      },
      {
        "file": "mcp.json",
        "format": "json",
        "purpose": "Generated IDE configuration (from template)"
      },
      {
        "file": "docker-compose.yml",
        "format": "yaml",
        "purpose": "Service orchestration"
      }
    ],
    "profiles": [
      {
        "file": "config/profiles/recommended.json",
        "servers": ["filesystem", "context7", "serena", "mindbase"],
        "memory": "~500MB",
        "purpose": "Default profile with memory and code understanding"
      },
      {
        "file": "config/profiles/minimal.json",
        "servers": ["filesystem", "context7"],
        "memory": "~50MB",
        "purpose": "Minimal profile with essential features only"
      },
      {
        "file": "config/profiles/dynamic.json",
        "servers": ["gateway-control", "serena", "context7"],
        "memory": "~300MB",
        "purpose": "LLM-controlled dynamic server management"
      }
    ],
    "build": [
      {
        "file": "apps/api/pyproject.toml",
        "format": "toml",
        "purpose": "Python dependencies (FastAPI, SQLAlchemy, Alembic)"
      },
      {
        "file": "apps/settings/package.json",
        "format": "json",
        "purpose": "React UI dependencies"
      },
      {
        "file": "package.json",
        "format": "json",
        "purpose": "Workspace root (pnpm 10.20.0)"
      }
    ]
  },
  "documentation": {
    "main": [
      {
        "file": "README.md",
        "topics": ["quick-start", "configuration", "commands"]
      },
      {
        "file": "CLAUDE.md",
        "topics": ["ai-assistant-guidance", "project-overview", "commands"]
      },
      {
        "file": "AGENTS.md",
        "topics": ["coding-conventions", "typescript-style", "python-style"]
      },
      {
        "file": "ARCHITECTURE.md",
        "topics": ["technical-deep-dive", "openmcp-pattern", "schema-partitioning"]
      },
      {
        "file": "HACKING.md",
        "topics": ["development-guide"]
      }
    ],
    "guides": [
      "docs/guides/mcp-best-practices.md",
      "docs/guides/mcp-installation.md",
      "docs/guides/augmentor-integration.md",
      "docs/guides/testing-implementation-summary.md"
    ],
    "research": [
      "docs/research/token-measurement-guide.md",
      "docs/research/PHASE2_IMPLEMENTATION_SUMMARY.md",
      "docs/research/mcp_servers_verification_20251018.md"
    ]
  },
  "tests": {
    "backend": {
      "unit": [
        "apps/api/tests/unit/test_secret_crud.py",
        "apps/api/tests/unit/test_mcp_server_state_crud.py",
        "apps/api/tests/unit/test_credentials_provider.py",
        "apps/api/tests/unit/test_schema_partitioning.py",
        "apps/api/tests/unit/test_dashboard_summary.py",
        "apps/api/tests/unit/test_public_routes.py"
      ],
      "integration": [
        "apps/api/tests/integration/test_server_toggle_workflow.py"
      ],
      "command": "make test"
    },
    "frontend": {
      "component": [
        "apps/settings/src/pages/mcp-dashboard/components/MCPServerCard.test.tsx",
        "apps/settings/src/pages/mcp-dashboard/page.test.tsx"
      ],
      "command": "make test-ui"
    },
    "coverage": {
      "backend": "pytest apps/api/tests/ --cov=app --cov-report=term-missing",
      "frontend": "vitest run --coverage"
    }
  },
  "dependencies": {
    "backend": {
      "fastapi": ">=0.120.0",
      "sqlalchemy": ">=2.0.35",
      "alembic": ">=1.13.3",
      "asyncpg": ">=0.30.0",
      "cryptography": ">=43.0.0",
      "pydantic": ">=2.10.0",
      "httpx": ">=0.27.0",
      "pytest": ">=8.3.0"
    },
    "frontend": {
      "react": "^19.2.0",
      "react-router-dom": "^7.9.4",
      "vite": "^7.1.12",
      "tailwindcss": "^4.1.16",
      "zod": "^4.1.12",
      "i18next": "^25.6.0",
      "vitest": "^4.0.7"
    },
    "mcp_servers": {
      "@modelcontextprotocol/sdk": "^1.0.4",
      "simple-git": "^3.27.0",
      "typescript": "^5.9.3"
    },
    "infrastructure": {
      "docker": "24.0+",
      "docker-compose": "2.20+",
      "postgresql": "15+",
      "pnpm": "10.20.0",
      "node": "24+"
    }
  },
  "quick_start": {
    "initial_setup": [
      "git clone https://github.com/agiletec-inc/airis-mcp-gateway.git",
      "cd airis-mcp-gateway",
      "cp .env.example .env",
      "just hosts-add",
      "just init"
    ],
    "development": [
      "make dev",
      "make logs",
      "make restart",
      "make test"
    ],
    "editor_config": [
      "just install-editors",
      "just verify-claude",
      "just uninstall"
    ]
  },
  "features": {
    "token_reduction": {
      "before": 12500,
      "after": 1250,
      "reduction_percent": 90,
      "mechanism": "schema_partitioning"
    },
    "unified_gateway": {
      "servers": 25,
      "transport": "sse",
      "dynamic_toggle": true
    },
    "multi_editor": {
      "supported": ["claude-desktop", "claude-code", "cursor", "zed", "codex"],
      "config": "unified"
    },
    "secrets_management": {
      "encryption": "fernet",
      "storage": "postgresql",
      "ui_based": true
    },
    "docker_first": {
      "zero_host_pollution": true,
      "named_volumes": true,
      "health_checks": true
    }
  },
  "architecture": {
    "layers": [
      {
        "name": "IDE Clients",
        "components": ["Claude Code", "Cursor", "Zed", "Codex"]
      },
      {
        "name": "FastAPI Proxy",
        "components": ["Schema Partitioning", "expandSchema Injection"]
      },
      {
        "name": "MCP Gateway",
        "components": ["25+ MCP Servers Orchestration"]
      }
    ],
    "innovation": "OpenMCP Lazy Loading Pattern",
    "performance": {
      "sse_connection_ms": 100,
      "tools_list_ms": 200,
      "expand_schema_ms": 10,
      "tools_call_overhead_ms": 10,
      "schema_cache_mb": 2
    }
  },
  "commands": {
    "daily_operations": {
      "just init": "Full reset + install",
      "make up": "Start with host ports",
      "make restart": "Stop + start",
      "make down": "Stop containers",
      "make clean": "Stop + drop volumes",
      "make logs": "Stream all logs"
    },
    "development": {
      "make deps": "Install pnpm deps",
      "make dev": "Vite dev server (UI)",
      "make build": "Build all workspaces",
      "make lint": "ESLint",
      "make typecheck": "TypeScript checks",
      "make test": "Backend tests",
      "make test-ui": "Frontend tests"
    },
    "database": {
      "make db-migrate": "Run migrations",
      "make db-shell": "PostgreSQL shell"
    },
    "custom_servers": {
      "make mindbase-build": "Build MindBase MCP server",
      "make gateway-control-build": "Build Gateway Control server",
      "make build-custom-servers": "Build both"
    }
  },
  "roi": {
    "index_creation_tokens": 2000,
    "index_reading_tokens": 3000,
    "full_codebase_tokens": 58000,
    "savings_per_session": 55000,
    "break_even_sessions": 1,
    "savings_100_sessions": 5500000
  },
  "security": {
    "secrets_encryption": "fernet",
    "encryption_key_env": "ENCRYPTION_MASTER_KEY",
    "storage": "postgresql",
    "network_isolation": {
      "exposed": ["FastAPI Proxy (9400)", "Settings UI (5273)"],
      "internal": ["MCP Gateway (9390)", "PostgreSQL (5432)", "MCP Servers"]
    }
  },
  "metadata": {
    "generated_by": "Index Creator Agent",
    "purpose": "94% token reduction (58K â†’ 3K) for session efficiency",
    "maintained_by": "Agiletec Inc.",
    "last_updated": "2025-11-12"
  }
}
