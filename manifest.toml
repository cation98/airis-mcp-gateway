version = 1
mode = "docker-first"
project = []

[workspace]
name = "airis-mcp-gateway"
package_manager = "pnpm@10.22.0"
service = "workspace"
image = "node:22-alpine"
workdir = "/app"
volumes = ["workspace-node-modules:/app/node_modules"]

[catalog]
vite = "lts"
typescript = "lts"
tailwindcss = "lts"
react = "lts"

[workspaces]
apps = []
libs = []

[dev]
apps = [
    "settings",
    "menubar",
    "desktop",
    "figma",
    "self-management",
    "mindbase",
]
autostart = []

[apps.settings]
path = "apps/settings"

[apps.menubar]
path = "apps/menubar"

[apps.desktop]
path = "apps/desktop"

[apps.figma]
path = "apps/figma"

[apps.self-management]
path = "servers/self-management"

[apps.mindbase]
path = "servers/mindbase"

[libs.augmentor-runtime]
path = "packages/augmentor-runtime"

[libs.cli]
path = "packages/cli"

[docker]
baseImage = ""
workdir = ""

[service]

[rule.verify]
commands = [
    "airis run lint",
    "airis run test-all",
]

[rule.ci]
commands = [
    "airis run lint",
    "airis run test-all",
    "airis run typecheck",
]

[packages]
workspaces = [
    "apps/*",
    "packages/*",
    "servers/*",
    "tools/*",
]

[packages.catalog]
next = "16.0.3"
react = "19.2.0"
typescript = "5.9.3"
vitest = "4.0.9"

[packages.root.dependencies]

[packages.root.devDependencies]
typescript = "5.6.2"
eslint = "9.3.0"

[packages.root.optionalDependencies]

[packages.root.scripts]

[packages.root.engines]

[packages.root.pnpm]
onlyBuiltDependencies = []

[packages.root.pnpm.overrides]

[packages.root.pnpm.peerDependencyRules]
ignoreMissing = []

[packages.root.pnpm.peerDependencyRules.allowedVersions]

[packages.root.pnpm.allowedScripts]

[[packages.app]]
pattern = "apps/*"

[packages.app.dependencies]

[packages.app.devDependencies]

[packages.app.scripts]

[guards]
deny = []
forbid = []
danger = []

[guards.wrap]

[guards.deny_with_message]

[orchestration]

[commands]
up = "docker compose up -d"
down = "docker compose down --remove-orphans"
shell = "docker compose exec -it workspace sh"
install = "docker compose exec workspace pnpm install"
dev = "docker compose exec workspace pnpm dev"
build = "docker compose exec workspace pnpm build"
test = "docker compose exec workspace pnpm test"
lint = "docker compose exec workspace pnpm lint"
typecheck = "docker compose exec workspace pnpm typecheck"
test-all = "docker compose exec workspace pnpm test"
clean = "rm -rf ./node_modules ./dist ./.next ./build ./target"
logs = "docker compose logs -f"
ps = "docker compose ps"

[remap]

[versioning]
strategy = "manual"
source = "1.3.0"

[docs]
targets = []
mode = "warn"

[ci]
enabled = true
auto_version = true

[ci.auto_merge]
enabled = true
from = "next"
to = "main"
