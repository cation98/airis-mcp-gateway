# ==========================================
# AIRIS MCP Gateway Configuration
# ==========================================

# Listen ports (container only) — compose では ports: を使わず expose のみ
# ※アプリ内部が bind する番号。外部公開は Traefik がドメインで管理。
GATEWAY_LISTEN_PORT=9090
API_LISTEN_PORT=9000
UI_CONTAINER_PORT=5173

# Host publishing (Traefik entrypoints for localhost/dev)
UI_LISTEN_PORT=5173

# Service wiring
# 内部呼び出しは Docker DNS（サービス名）。外部公開はドメインで。
API_INTERNAL_URL=http://api:9000
MINDBASE_API_URL=http://mindbase-api:18002
# 公開URLはドメイン駆動（dev: http、stg/prod: https）
GATEWAY_PUBLIC_URL=http://gateway.localhost:9090
GATEWAY_API_URL=http://api.gateway.localhost:9100/api
UI_PUBLIC_URL=http://ui.gateway.localhost:5173

# API runtime options
API_DEBUG=true

# Database
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=mcp_gateway

# Encryption (REQUIRED for secret storage)
# Sample key for local development. Generate your own for staging/production:
# python - <<'PY'
# import os, base64
# print(base64.urlsafe_b64encode(os.urandom(32)).decode())
# PY
ENCRYPTION_MASTER_KEY=xeOpFnCTBXnY3m65gO4V6hHLOBqKFGfJp42io8yAREU=
# Optional hex representation for AES-GCM (preferred for new credential store)
# MASTER_KEY_HEX=8d9b3f5d1c0a4e8f9d7c6b5a48372615

# Advanced: Auto-set by Makefile (do not modify unless using docker compose directly)
# HOST_WORKSPACE_DIR=/absolute/path/to/parent/dir
# HOST_REPO_DIR=/absolute/path/to/repo
# HOST_SUPABASE_DIR=/absolute/path/to/airis-mcp-supabase-selfhost
# CONTAINER_WORKSPACE_ROOT=/workspace/host
# CONTAINER_PROJECT_ROOT=/workspace/host/airis-mcp-gateway
# DOCKER_NETWORK=airis-mcp-gateway_default
# COMPOSE_PROJECT_NAME=airis-mcp-gateway

# Supabase Self-host MCP (dev)
# 1) 同一ネットワークならサービス名で直参照
PG_DSN=postgres://mcp_ro:password@postgres:5432/postgres
POSTGREST_URL=http://postgrest:3000/rest/v1
# 2) もしくは Traefik 経由のドメインで統一
# POSTGREST_URL=http://supabase.localhost/rest/v1
POSTGREST_JWT=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.c3VwYWJhc2Uuc2VsZmhvc3Q.dGVzdC1zaWduYXR1cmU
READ_ONLY=true
FEATURES=database,docs,postgrest
